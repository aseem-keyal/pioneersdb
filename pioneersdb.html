<head>
  <title>pioneersdb</title>
</head>

<body>
    <div class="container">
        {{#if currentUser}}
            {{> dashboard}}
        {{else}}
            {{> adminRegister}}
            {{> adminLogin}}
        {{/if}}
    </div>
</body>

<template name="dashboard">
    <div class="col-md-8">
        <h3>You're logged in.</h3>
        {{#with currentUser.profile}}
            {{#if approved}}
                <p>You're registered!</p>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Approve admin</th>
                        </tr>
                    </thead>
                    <tbody>
                    {{#each user}}
                        {{> potentialAdmin}}
                    {{/each}}
                    </tbody>
                </table>
            {{else}}
                <p>You're not registered :(</p>
            {{/if}}
        {{/with}}
        <p><a href="#" class="logout">Logout</a></p>
    </div>
</template>

<template name="adminRegister">
    <div class="col-md-4">
        <h3>Admin Register</h3>
        <form>
            <div class="form-group">
                <label for="registerEmail">Email address</label>
                <input type="email" class="form-control" name="registerEmail">
            </div>
            <div class="form-group">
                <label for="registerPasswod">Password</label>
                <input type="password" class="form-control" name="registerPassword">
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
    </div>
</template>

<template name="adminLogin">
    <div class="col-md-4">
        <h3>Admin Login</h3>
        <form>
            <div class="form-group">
                <label for="loginEmail">Email address</label>
                <input type="email" class="form-control" name="loginEmail">
            </div>
            <div class="form-group">
                <label for="loginPasswod">Password</label>
                <input type="password" class="form-control" name="loginPassword">
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
    </div>
</template>
<template name="potentialAdmin">
    <tr>
        <td>{{userEmail}}</td>
        {{#if profile.approved}}
            <td><button type="button" class="btn btn-default" disabled="disabled">Approved</button></td>
        {{else}}
            <td><a href="#" class="btn btn-primary approve">Approve</a></td>
        {{/if}}
    </tr>
</template>
